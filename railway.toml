[build]
builder = "nixpacks"
buildCommand = "apt-get update && apt-get install -y openjdk-21-jdk && mkdir -p target/classes && javac -cp 'lib/*' -d target/classes src/*.java"

[nixpacks]
config = { JAVA_VERSION = "21" }

[deploy]
startCommand = "java -cp target/classes:lib/* WebCalculator"
numReplicas = 1

[[services]]
name = "web"
run = "java -cp target/classes:lib/* WebCalculator"
port = 4567